#!/usr/bin/bash

#set variables
pg_dump="/home/Ryan/pgsql/bin/pg_dump.exe"
dump_path="D:/Users/Ryan/Dropbox/Sierra/backup/"
current_date=$(date +%Y-%m-%d__%H-%M-%S)

backup_file=$dump_path$current_date".backup"
log_file=$dump_path$current_date".log"

#create the backup
source ~/bin/cygwin/susie_dump $backup_file $log_file

stat $backup_file

until [[ "$INPUT" == "y" ]]; do
        echo "Continue? (y/n)"
        read INPUT

        case $INPUT in
               y)
                        ;;     #nothing
               n)
               exit 1          #exit with error
                        ;;
                *)
        esac
done

#drop the sandbox
source ~/bin/cygwin/susie_drop

#create the sandbox
source ~/bin/cygwin/susie_create

#restore to sandbox
source ~/bin/cygwin/susie_restore
